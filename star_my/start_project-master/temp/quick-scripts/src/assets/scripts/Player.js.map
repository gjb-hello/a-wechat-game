{"version":3,"sources":["assets\\scripts\\Player.js"],"names":["cc","Class","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","jumpAudio","url","AudioClip","onLoad","console","log","jumpAction","setJumpAction","node","runAction","accLeft","accRight","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","update","dt","Math","abs","x","jumpUp","moveBy","Vec2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","callback","callFunc","playJumpSound","repeatForever","sequence","event","keyCode","macro","KEY","a","d","audioEngine","playEffect"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // ������Ծ�߶�\r\n        jumpHeight: 0,\r\n\r\n        // ������Ծ����ʱ��\r\n        jumpDuration: 0,\r\n\r\n        // ����ƶ��ٶ�\r\n        maxMoveSpeed: 0,\r\n\r\n        // ���ٶ�\r\n        accel: 0,\r\n\r\n         // ��Ծ��Ч��Դ\r\n        jumpAudio: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n    },\r\n\r\n\r\n    onLoad: function () {\r\n\r\n        console.log(\"player\");\r\n        // ��ʼ����Ծ����\r\n        this.jumpAction = this.setJumpAction();\r\n        this.node.runAction(this.jumpAction);\r\n\r\n        // ���ٶȷ��򿪹�\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n        // ���ǵ�ǰˮƽ�����ٶ�\r\n        this.xSpeed = 0;\r\n\r\n        // ��ʼ�������������\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this)\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n\r\n\r\n    update: function (dt) {\r\n        // ���ݵ�ǰ���ٶȷ���ÿ֡�����ٶ�\r\n        //this.xSpeed��Ϊ����Ϊ��\r\n        if (this.accLeft) {\r\n            this.xSpeed -= this.accel * dt;\r\n        } else if (this.accRight) {\r\n            this.xSpeed += this.accel * dt;\r\n        }\r\n        // �������ǵ��ٶȲ��ܳ������ֵ\r\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed) {\r\n            // if speed reach limit, use max speed with current direction\r\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\r\n        }\r\n\r\n        // ���ݵ�ǰ�ٶȸ������ǵ�λ��\r\n        this.node.x += this.xSpeed * dt;\r\n    },\r\n\r\n    setJumpAction: function () {\r\n        // ��Ծ����\r\n\r\n        //cc.p��2.0�汾֮����֧�֣���Ϊcc.Vec\r\n        //cc.MoveBy(duration, deltaPos, deltaY);\r\n\r\n        //cc.moveBy(this.jumpDuration, cc.p(0, this.jumpHeight))��˼����jumpDurationʱ�����ƶ���\r\n        //����ڵ�ǰ�ڵ�0,this.jumpHeight��λ��\r\n\r\n        //��벿��easing(cc.easeCubicActionOut())��������ʲô�أ�easing��ActionInterval���µ�һ���������������\r\n        //������ʱ������������Ϊһ�ֻ����˶�������Ĳ�����һ���������󣬷���һ��ActionInterval���Ͷ�������\r\n        //ʹ��easeCubicActionInOut���������Ļ�������EaseCubicInOut�ǰ����κ����������벢�˳��Ķ���\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.Vec2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n\r\n        // ����\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.Vec2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n\r\n        // ����һ���ص������������ڶ�������ʱ�������Ƕ������������\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n\r\n        // �����ظ�������ÿ�������ض�������ûص�����������\r\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown, callback));\r\n    },\r\n\r\n    //����a�������,d���Ҽ���\r\n    onKeyDown(event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyUp(event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    playJumpSound: function () {\r\n        // �����������沥������\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n});\r\n"]}